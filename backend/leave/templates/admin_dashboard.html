{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'output.css' %}">
    <!-- <link rel="stylesheet" href="{% static 'sstyles.css' %}"> -->
    <!-- script -->
    <script defer async src="https://unpkg.com/@material-tailwind/html@latest/scripts/ripple.js"></script>
</head>
<style>
    .notification {
        position: relative;
        padding: 1em;
        margin: 1em;
        border-radius: 0.25rem;
    }

    .notification.success {
        color: #155724;
        background-color: #d4edda;
        border: 1px solid #c3e6cb;
    }

    .notification.info {
        color: #721c24;
        background-color: #f8d7da;
        border: 1px solid #f5c6cb;
    }

    .notification .close {
        position: absolute;
        right: 0.5em;
        top: 0.5em;
        cursor: pointer;
    }
</style>


<style>
    .notification {
      position: relative;
      padding: 1em;
      margin: 1em;
      border-radius: 0.25rem;
    }
  
    .notification.success {
      color: #155724; /* Green color for success messages */
      background-color: #d4edda; /* Light green background color for success messages */
      border: 1px solid #c3e6cb; /* Border color for success messages */
    }
  
    .notification.info {
      color: #721c24; /* Red color for info messages */
      background-color: #f8d7da; /* Light red background color for info messages */
      border: 1px solid #f5c6cb; /* Border color for info messages */
    }
  
    .notification .close {
      position: absolute;
      right: 0.5em;
      top: 0.5em;
      cursor: pointer;
    }
  </style>
  

<body class="">

    <!-- {% if messages %}
    {% for message in messages %}
    {% if message.tags %}
    <script>alert("{{ message }}")</script> {% endif %}
    {% endfor %}
    {% endif %} -->



    <div class="flex justify-between items-center flex-wrap bg-cyan-600 px-8 sticky top-0 z-50 py-3">
        <!-- Sidebar Content -->
        <!-- <div class="h-full w-64 px-4 bg-white bg-clip-border p-4 text-gray-700 shadow-xl shadow-blue-gray-900/5 z-40"
            id="sidebar">
            <div class="relative flex flex-col text-gray-700">
                <div class=" flex justify-between">
                    <h5
                        class="block font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-blue-gray-900">
                        Admin
                    </h5>

                </div>

            </div>
        </div> -->
        <div class="flex gap-10 items-center">
            <div class="text-black cursor-pointer" onclick="toggleSidebar()">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7">
                    </path>
                </svg>
            </div>



            <h1 class="text-3xl font-semibold py-5 text-center pb-4 text-black">ELMS | ADMIN</h1>
        </div>

        <a href="/logout/" data-ripple-light="true">
            <button
                class="align-middle select-none font-sans  text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-3 px-6 rounded-lg border border-gray-900 text-gray-900 hover:opacity-75 focus:ring focus:ring-gray-300 active:opacity-[0.85]"
                type="button">
                Logout
            </button>
        </a>
    </div>
    {% if messages %}
    {% for message in messages %}
    <div class="notification {% if message.tags == 'success' %}success{% elif message.tags == 'info' %}info{% endif %}">
        {{ message }}
        <span class="close" onclick="this.parentElement.style.display='none';">&times;</span>
    </div>
    {% endfor %}
    {% endif %}
    <br>
    {% if user.is_authenticated and user.role == "ADMIN" %}
    <div class="  sm:flex justify-between ">
        <nav id="sidebar"
            class=" hidden flex-col gap-1 p-2 font-sans text-base font-normal text-blue-gray-700 shadow-xl sm:top-20 sticky bg-white z-40">
            <div role="button"  onclick="showContent('home')" data-ripple-light="true"
                class="flex  items-center w-full p-3 leading-tight  transition-all rounded-lg outline-none text-start hover:bg-blue-gray-700 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-700 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900">
                <div class="grid mr-4 place-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"
                        class="w-5 h-5">
                        <path fill-rule="evenodd"
                            d="M2.25 2.25a.75.75 0 000 1.5H3v10.5a3 3 0 003 3h1.21l-1.172 3.513a.75.75 0 001.424.474l.329-.987h8.418l.33.987a.75.75 0 001.422-.474l-1.17-3.513H18a3 3 0 003-3V3.75h.75a.75.75 0 000-1.5H2.25zm6.04 16.5l.5-1.5h6.42l.5 1.5H8.29zm7.46-12a.75.75 0 00-1.5 0v6a.75.75 0 001.5 0v-6zm-3 2.25a.75.75 0 00-1.5 0v3.75a.75.75 0 001.5 0V9zm-3 2.25a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0v-1.5z"
                            clip-rule="evenodd"></path>
                    </svg>
                </div>
                Dashboard
            </div>
            <div role="button"  onclick="showContent('user_manage')" data-ripple-light="true"
                class="flex  items-center w-full p-3 leading-tight  transition-all rounded-lg outline-none text-start hover:bg-blue-gray-700 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-700 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900">
                <div class="grid mr-4 place-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"
                        class="w-5 h-5">
                        <path fill-rule="evenodd"
                            d="M7.5 6v.75H5.513c-.96 0-1.764.724-1.865 1.679l-1.263 12A1.875 1.875 0 004.25 22.5h15.5a1.875 1.875 0 001.865-2.071l-1.263-12a1.875 1.875 0 00-1.865-1.679H16.5V6a4.5 4.5 0 10-9 0zM12 3a3 3 0 00-3 3v.75h6V6a3 3 0 00-3-3zm-3 8.25a3 3 0 106 0v-.75a.75.75 0 011.5 0v.75a4.5 4.5 0 11-9 0v-.75a.75.75 0 011.5 0v.75z"
                            clip-rule="evenodd"></path>
                    </svg>
                </div>
                User Management
            </div>
            <div role="button"  onclick="showContent('user')" data-ripple-light="true"
                class="flex  items-center w-full p-3 leading-tight  transition-all rounded-lg outline-none text-start hover:bg-blue-gray-700 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-700 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900">
                <div class="grid mr-4 place-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"
                        class="w-5 h-5">
                        <path fill-rule="evenodd"
                            d="M7.5 6v.75H5.513c-.96 0-1.764.724-1.865 1.679l-1.263 12A1.875 1.875 0 004.25 22.5h15.5a1.875 1.875 0 001.865-2.071l-1.263-12a1.875 1.875 0 00-1.865-1.679H16.5V6a4.5 4.5 0 10-9 0zM12 3a3 3 0 00-3 3v.75h6V6a3 3 0 00-3-3zm-3 8.25a3 3 0 106 0v-.75a.75.75 0 011.5 0v.75a4.5 4.5 0 11-9 0v-.75a.75.75 0 011.5 0v.75z"
                            clip-rule="evenodd"></path>
                    </svg>
                </div>
                Create User
            </div>
            <div role="button"  onclick="showContent('depts')" data-ripple-light="true"
                class="flex  items-center w-full p-3 leading-tight  transition-all rounded-lg outline-none text-start hover:bg-blue-gray-700 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-700 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900">
                <div class="grid mr-4 place-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"
                        class="w-5 h-5">
                        <path fill-rule="evenodd"
                            d="M7.5 6v.75H5.513c-.96 0-1.764.724-1.865 1.679l-1.263 12A1.875 1.875 0 004.25 22.5h15.5a1.875 1.875 0 001.865-2.071l-1.263-12a1.875 1.875 0 00-1.865-1.679H16.5V6a4.5 4.5 0 10-9 0zM12 3a3 3 0 00-3 3v.75h6V6a3 3 0 00-3-3zm-3 8.25a3 3 0 106 0v-.75a.75.75 0 011.5 0v.75a4.5 4.5 0 11-9 0v-.75a.75.75 0 011.5 0v.75z"
                            clip-rule="evenodd"></path>
                    </svg>
                </div>
                Manage Departments
            </div>
            <div class="relative block w-full">
                <div role="button" 
                    class="flex items-center w-full p-0 leading-tight transition-a ll rounded-lg outline-none text-start hover:bg-blue-gray-700 hover:bg-opacity-80 hover:text-blue-gra700900 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900">
                    <button type="button"
                        class="flex items-center justify-between w-full p-3 font-sans text-xl antialiased font-semibold leading-snug text-left transition-colors border-b-0 select-none border-b-blue-gray-100 text-blue-gray-700 hover:text-blue-gray-900">
                        <div class="grid mr-4 place-items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                aria-hidden="true" class="w-5 h-5">
                                <path fill-rule="evenodd"
                                    d="M2.25 2.25a.75.75 0 000 1.5H3v10.5a3 3 0 003 3h1.21l-1.172 3.513a.75.75 0 001.424.474l.329-.987h8.418l.33.987a.75.75 0 001.422-.474l-1.17-3.513H18a3 3 0 003-3V3.75h.75a.75.75 0 000-1.5H2.25zm6.04 16.5l.5-1.5h6.42l.5 1.5H8.29zm7.46-12a.75.75 0 00-1.5 0v6a.75.75 0 001.5 0v-6zm-3 2.25a.75.75 0 00-1.5 0v3.75a.75.75 0 001.5 0V9zm-3 2.25a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0v-1.5z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                        <p
                            class="block mr-auto font-sans text-base antialiased font-normal leading-relaxed text-blue-gray-900">
                            Leave Management
                        </p>
                    </button>
                </div>
                <div class="overflow-hidden">
                    <div
                        class="block w-full py-1 font-sans text-sm antialiased font-light leading-normal text-gray-700">
                        <nav
                            class="flex min-w-[240px] flex-col gap-1 p-0 font-sans text-base font-normal text-blue-gray-700">
                            <div role="button"  onclick="showContent('pending')" data-ripple-light="true"
                                class="flex  items-center w-full p-3 leading-tight  transition-all rounded-lg outline-none text-start hover:bg-blue-gra7-500 hover:bg-opacity-80 hover:text-blue-gray-7000 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900">
                                <div class="grid mr-4 place-items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="3" stroke="currentColor" aria-hidden="true" class="w-5 h-3">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
                                    </svg>
                                </div>
                                Pending Leaves
                            </div>
                            <div role="button"  onclick="showContent('disapproved')" data-ripple-light="true"
                                class="flex  items-center w-full p-3 leading-tight  transition-all rounded-lg outline-none text-start hover:bg-blue-gra7-500 hover:bg-opacity-80 hover:text-blue-gray-7000 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900">
                                <div class="grid mr-4 place-items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="3" stroke="currentColor" aria-hidden="true" class="w-5 h-3">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
                                    </svg>
                                </div>
                                Disapproved Leaves
                            </div>
                            <div role="button"  onclick="showContent('approved')" data-ripple-light="true"
                                class="flex  items-center w-full p-3 leading-tight  transition-all rounded-lg outline-none text-start hover:bg-blue-gra7-500 hover:bg-opacity-80 hover:text-blue-gray-7000 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900">
                                <div class="grid mr-4 place-items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="3" stroke="currentColor" aria-hidden="true" class="w-5 h-3">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
                                    </svg>
                                </div>
                                Approved Leaves
                            </div>
                            <div role="button"  onclick="showContent('empleaves')" data-ripple-light="true"
                                class="flex  items-center w-full p-3 leading-tight  transition-all rounded-lg outline-none text-start hover:bg-blue-gra7-500 hover:bg-opacity-80 hover:text-blue-gray-7000 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900">
                                <div class="grid mr-4 place-items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="3" stroke="currentColor" aria-hidden="true" class="w-5 h-3">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
                                    </svg>
                                </div>
                                Employee Leaves
                            </div>
                            <div role="button"  onclick="showContent('leavecat')" data-ripple-light="true"
                                class="flex  items-center w-full p-3 leading-tight  transition-all rounded-lg outline-none text-start hover:bg-blue-gra7-500 hover:bg-opacity-80 hover:text-blue-gray-7000 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900">
                                <div class="grid mr-4 place-items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke-width="3" stroke="currentColor" aria-hidden="true" class="w-5 h-3">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
                                    </svg>
                                </div>
                                Leave Categories
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
            <a href="/logout/" data-ripple-light="true">
                <div role="button"  data-ripple-light="true"
                    class="flex items-center w-full p-3 leading-tight  transition-a ll rounded-lg outline-none text-start hover:bg-blue-gray-700 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-700 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900">
                    <div class="grid mr-4 place-items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                            aria-hidden="true" class="w-5 h-5">
                            <path fill-rule="evenodd"
                                d="M12 2.25a.75.75 0 01.75.75v9a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM6.166 5.106a.75.75 0 010 1.06 8.25 8.25 0 1011.668 0 .75.75 0 111.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 011.06 0z"
                                clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    Log Out
                </div>
            </a>
        </nav>
        <div id="home" class="content">
            <div class="flex flex-wrap gap-8">
                <!-- Total Registered Employees Card -->
                <div
                    class="bg-white text-gray-600 rounded shadow-xl px-6 py-2  mx-auto w-[90%] md:w-[40%] border-b-4 border-opacity-70 border-cyan-400 ">
                    <h2 class="text-xl mb-4 font-medium">Total Registered Employees</h2>
                    <p class="text-4xl">{{ total_registered_employees }}</p>
                </div>

                <!-- Listed Leave Types Card -->
                <div
                    class="bg-white text-gray-600 rounded shadow-xl px-6 py-2  mx-auto w-[90%] md:w-[40%] border-b-4 border-opacity-70 border-cyan-400 ">
                    <h2 class="text-xl mb-4 font-medium">Listed Leave Types</h2>
                    <p class="text-4xl">{{ listed_leave_types }}</p>
                </div>

                <!-- Total Leaves Card -->
                <div
                    class="bg-white text-gray-600 rounded shadow-xl px-6 py-2  mx-auto w-[90%] md:w-[40%] border-b-4 border-opacity-70 border-cyan-400 ">
                    <h2 class="text-xl mb-4 font-medium">Total Leaves</h2>
                    <p class="text-4xl">{{ total_leaves }}</p>
                </div>

                <!-- Approved Leaves Card -->
                <div
                    class="bg-white text-gray-600 rounded shadow-xl px-6 py-2  mx-auto w-[90%] md:w-[40%] border-b-4 border-opacity-70 border-cyan-400 ">
                    <h2 class="text-xl mb-4 font-medium">Approved Leaves</h2>
                    <p class="text-4xl">{{ approved_leaves }}</p>
                </div>

                <!-- New Leave Applications Card -->
                <div
                    class="bg-white text-gray-600 rounded shadow-xl px-6 py-2  mx-auto w-[90%] md:w-[40%] border-b-4 border-opacity-70 border-cyan-400 ">
                    <h2 class="text-xl mb-4 font-medium">New Leave Applications</h2>
                    <p class="text-4xl">{{ new_leave_applications_count }}</p>
                </div>

            </div>
            <br>
            <div class=" bg-white rounded shadow p-6 overflow-x-auto">
                <h2 class="text-xl mb-4 uppercase">Latest Leave Applications</h2>
                <hr class="bg-black py-[1px] w-[90%] mb-5">

                <table class="w-full table">
                    <thead>
                        <tr class="text-blue-900">
                            <th class="text-start px-4">User</th>
                            <th class="text-start px-4">Leave Category</th>
                            <th class="text-start px-4">From Date</th>
                            <th class="text-start px-4">To Date</th>
                            <th class="text-start px-4">No. of Days</th>
                            <th class="text-start px-4">Date of Application</th>
                            <th class="text-start px-4">Attachment</th>
                            <th class="text-start px-4">Status</th>
                            <th class="text-start px-4">Actions</th> <!-- New column for actions -->
                        </tr>
                    </thead>
                    <tbody>
                        {% for application in new_leave_applications %}
                        <tr class="{% cycle 'bg-gray-50' 'bg-white' %}">
                            <td class="  px-4 py-2 font-medium text-blue-600">{{ application.user }}</td>
                            <td class="px-4 py-2">
                                {% if application.leave_category.leave_type == 'Half Days' %}
                                    {{ application.leave_category.leave_type }} ({{ application.which_half }})
                                {% else %}
                                    {{ application.leave_category.leave_type }}
                                {% endif %}
                            </td>
                            <td class="px-4 py-2">{{ application.from_date }}</td>
                            <td class="px-4 py-2">{{ application.to_date }}</td>
                            <td class="px-4 py-2">{{ application.duration }}</td>
                            <td class="px-4 py-2">{{ application.applied_on }}</td>
                            {% if application.attachment %}
                            <td class="  px-4 py-2">
                                <a class="underline" style="color: blue;" href="{{ application.attachment.url }}"
                                    target="_blank">Attachment</a>
                            </td>
                            {% else %}
                            <td class="  px-4 py-2">-</td>
                            {% endif %}
                            <td class="  px-4 py-2 font-semibold text-red-600">Pending</td>
                            <td class="  px-4 py-5 flex gap-5">
                                <form method="post" action="{% url 'approve_leave' application.id %}">
                                    {% csrf_token %}
                                    <!-- Other fields -->
                                    <div class="w-64 lg:w-72">
                                        <div class="relative w-full min-w-[200px]">
                                            <textarea id="admin_remark" name="admin_remark"
                                                class="peer h-full min-h-[100px] w-full resize-none rounded-[7px] border border-blue-gray-200 border-t-transparent bg-transparent px-3 py-2.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 focus:border-2 focus:border-gray-900 focus:border-t-transparent focus:outline-0 disabled:resize-none disabled:border-0 disabled:bg-blue-gray-50"
                                                placeholder=" "></textarea>
                                            <label
                                                class="before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1.5 flex h-full w-full select-none text-[11px] font-normal leading-tight text-blue-gray-400 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-blue-gray-600 before:transition-all after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-blue-gray-200 after:transition-all peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[3.75] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-opacity-80 peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:border-gray-900 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:border-gray-900 peer-disabled:text-transparent peer-disabled:before:border-opacity-80 peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                                                Admin Remark
                                            </label>
                                        </div>
                                    </div>
                                    <button type="submit" data-ripple-light="true"
                                        class="select-none rounded-lg bg-green-500 py-3 px-6 text-center align-middle font-sans text-xs font-semibold uppercase text-white shadow-md shadow-green-500/20 transition-all hover:shadow-lg hover:shadow-green-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">Approve
                                        Leave</button>
                                </form>
                                <br>
                                <hr class="bg-black py-[1px]">
                                <br>
                                <form method="post" action="{% url 'disapprove_leave' application.id %}">
                                    {% csrf_token %}
                                    <!-- Other fields -->
                                    <div class="w-64 lg:w-72">
                                        <div class="relative w-full min-w-[200px]">
                                            <textarea id="admin_remark" name="admin_remark"
                                                class="peer h-full min-h-[100px] w-full resize-none rounded-[7px] border border-blue-gray-200 border-t-transparent bg-transparent px-3 py-2.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 focus:border-2 focus:border-gray-900 focus:border-t-transparent focus:outline-0 disabled:resize-none disabled:border-0 disabled:bg-blue-gray-50"
                                                placeholder=" "></textarea>
                                            <label
                                                class="before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1.5 flex h-full w-full select-none text-[11px] font-normal leading-tight text-blue-gray-400 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-blue-gray-600 before:transition-all after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-blue-gray-200 after:transition-all peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[3.75] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-opacity-80 peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:border-gray-900 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:border-gray-900 peer-disabled:text-transparent peer-disabled:before:border-opacity-80 peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                                                Admin Remark
                                            </label>
                                        </div>
                                    </div>
                                    <button type="submit" data-ripple-light="true"
                                        class="select-none rounded-lg bg-red-500 py-3 px-6 text-center align-middle font-sans text-xs font-semibold uppercase text-white shadow-md shadow-red-500/20 transition-all hover:shadow-lg hover:shadow-red-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">Disapprove
                                        Leave</button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Existing Users Section -->
        <div id="user_manage"
            class="content hidden rounded-xl bg-white bg-clip-border p-4 text-gray-700 shadow-xl shadow-blue-gray-900/5 h-full overflow-x-auto">
            <h2 class="text-xl mb-4 font-semibold uppercase">Employees info</h2>
            <input type="text" id="userFilter" class="border-gray-300 border w-full px-3 py-2 rounded mb-4"
                placeholder="Filter by Name or Email" />
            <table class="w-full">
                <thead>
                    <tr class="text-blue-900">
                        <th class="text-start pb-4 px-4">Name</th>
                        <th class="text-start pb-4 px-4">Email</th>
                        <th class="text-start pb-4 px-4">Role</th>
                        <th class="text-start pb-4 px-4">Date of Joining</th>
                        <th class="text-start pb-4 px-4">Status</th>
                        <th class="text-start pb-4 px-4">Action</th>
                    </tr>
                </thead>
                <tbody id="userTableBody">
                    {% for user in all_users %}
                    {% if user.role != 'ADMIN' %}
                    <tr class="{% cycle 'bg-gray-50' 'bg-white' %}">
                        <td class=" text-blue-600 font-medium  px-4 py-2">
                            {{user.name }}</td>
                        <td class="  px-4 py-2">{{ user.email }}</td>
                        <td class=" px-4 py-2 text-wrap">{{ user.role }}</td>
                        <td class=" px-4 py-2">{{ user.date_of_joining }}</td>
                        <td class="  px-4 py-2">
                            {% if user.is_active %}
                            <span class="text-green-700 font-semibold">ACTIVE</span>
                            {% else %}
                            <span class="text-red-700 font-semibold">INACTIVE</span>
                            {% endif %}
                        </td>
                        <td class="  px-4 py-2">
                            {% if user.is_active %}
                            <form method="post" action="{% url 'toggle_user_status' user.id 'inactive' %}">
                                {% csrf_token %}
                                <button type="submit" data-ripple-light="true"
                                    class="select-none rounded-lg bg-red-500 py-3 px-6 text-center align-middle font-sans text-xs font-semibold uppercase text-white shadow-md shadow-red-500/20 transition-all hover:shadow-lg hover:shadow-red-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">Mark
                                    Inactive</button>
                            </form>
                            {% else %}
                            <form method="post" action="{% url 'toggle_user_status' user.id 'active' %}">
                                {% csrf_token %}
                                <button type="submit" data-ripple-light="true"
                                    class="select-none rounded-lg bg-green-500 py-3 px-6 text-center align-middle font-sans text-xs font-semibold uppercase text-white shadow-md shadow-green-500/20 transition-all hover:shadow-lg hover:shadow-green-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">Mark
                                    Active</button>
                            </form>
                            {% endif %}
                        </td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Create New User Section -->
        <div id="user" class="content hidden mb-4 bg-white rounded-xl shadow-xl px-6 py-2 sm:w-1/2 start-0">
            <h2 class="text-xl mb-4 border-b-2 w-fit pb-4 border-black uppercase">employee Info</h2>
            <form method="post" action="/create-user/" class="space-y-4">
                {% csrf_token %}
                <div class="flex gap-10 flex-wrap">

                    <div class="relative h-11 min-w-[200px]">
                        <input type="text" id="name" name="name"
                            class="peer h-full w-full border-b border-blue-gray-200 bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-500 focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50 placeholder:opacity-0 focus:placeholder:opacity-100" />
                        <label for="name"
                            class="after:content[''] pointer-events-none absolute left-0  -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-700 transition-all after:absolute after:-bottom-1.5 after:block after:w-full after:scale-x-0 after:border-b-2 after:border-gray-500 after:transition-transform after:duration-300 peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[4.25] peer-placeholder-shown:text-blue-gray-500 peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-cyan-700 peer-focus:after:scale-x-100 peer-focus:after:border-cyan-700 peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                            Name:
                        </label>
                    </div>
                    <div class="relative h-11 min-w-[200px]">
                        <input type="email" id="email" name="email"
                            class="peer h-full w-full border-b border-blue-gray-200 bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-500 focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50 placeholder:opacity-0 focus:placeholder:opacity-100" />
                        <label for="email"
                            class="after:content[''] pointer-events-none absolute left-0  -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-700 transition-all after:absolute after:-bottom-1.5 after:block after:w-full after:scale-x-0 after:border-b-2 after:border-gray-500 after:transition-transform after:duration-300 peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[4.25] peer-placeholder-shown:text-blue-gray-500 peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-cyan-700 peer-focus:after:scale-x-100 peer-focus:after:border-cyan-700 peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                            Email:
                        </label>
                    </div>

                </div>
                <div class="flex gap-10 flex-wrap">
                    <div class="relative h-11 min-w-[200px]">
                        <input type="password" id="password" name="password"
                            class="peer h-full w-full border-b border-blue-gray-200 bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-500 focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50 placeholder:opacity-0 focus:placeholder:opacity-100" />
                        <label for="password"
                            class="after:content[''] pointer-events-none absolute left-0  -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-700 transition-all after:absolute after:-bottom-1.5 after:block after:w-full after:scale-x-0 after:border-b-2 after:border-gray-500 after:transition-transform after:duration-300 peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[4.25] peer-placeholder-shown:text-blue-gray-500 peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-cyan-700 peer-focus:after:scale-x-100 peer-focus:after:border-cyan-700 peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                            Password:
                        </label>
                    </div>
                    <div class="relative h-10 w-72 min-w-[200px]">
                        <!-- <label for="role" class="block">Role:</label> -->
                        <select id="role" name="role"
                            class="peer h-full w-full rounded-[7px] border border-blue-gray-200 border-t-transparent bg-transparent px-3 py-2.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 empty:!bg-gray-900 focus:border-2 focus:border-gray-900 focus:border-t-transparent focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50">
                            <option value="">-Select Role-</option>
                            {% for role in user.Role.choices %}
                            <option value="{{ role.0 }}">{{ role.1 }}</option>
                            {% endfor %}
                        </select>
                        <label
                            class="before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1.5 flex h-full w-full select-none text-[11px] font-normal leading-tight text-blue-gray-400 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-blue-gray-200 before:transition-all after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-blue-gray-200 after:transition-all peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[3.75] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-opacity-80 peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:border-gray-900 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:border-gray-900 peer-disabled:text-transparent peer-disabled:before:border-opacity-80 peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                            Select a Role
                        </label>
                    </div>
                </div>
                <br>
                <div class="relative h-11 min-w-[200px]">
                    <!-- <label for="gender" class="block">Gender:</label> -->
                    <select id="gender" name="gender"
                        class="peer h-full w-full rounded-[7px] border border-blue-gray-200 border-t-transparent bg-transparent px-3 py-2.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 empty:!bg-gray-900 focus:border-2 focus:border-gray-900 focus:border-t-transparent focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50">
                        <option value="">-Select Gender-</option>
                        {% for gender in user.Gender.choices %}
                        <option value="{{ gender.0 }}">{{ gender.1 }}</option>
                        {% endfor %}
                    </select>
                    <label
                        class="before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1.5 flex h-full w-full select-none text-[11px] font-normal leading-tight text-blue-gray-400 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-blue-gray-200 before:transition-all after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-blue-gray-200 after:transition-all peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[3.75] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-opacity-80 peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:border-gray-900 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:border-gray-900 peer-disabled:text-transparent peer-disabled:before:border-opacity-80 peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                        Select a Gender
                    </label>
                </div>
                <br>
                <div class="relative h-11 min-w-[200px]">
                    <input type="text" id="emp_code" name="emp_code"
                        class="peer h-full w-full border-b border-blue-gray-200 bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-500 focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50 placeholder:opacity-0 focus:placeholder:opacity-100" />
                    <label for="emp_code"
                        class="after:content[''] pointer-events-none absolute left-0  -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-700 transition-all after:absolute after:-bottom-1.5 after:block after:w-full after:scale-x-0 after:border-b-2 after:border-gray-500 after:transition-transform after:duration-300 peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[4.25] peer-placeholder-shown:text-blue-gray-500 peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-cyan-700 peer-focus:after:scale-x-100 peer-focus:after:border-cyan-700 peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                        Employee Code:
                    </label>
                </div>
                <br>
                <div class="relative h-11 min-w-[200px]">
                    <!-- <label for="dept" class="block">Department:</label> -->
                    <select id="dept" name="dept"
                            class="peer h-full w-full rounded-[7px] border border-blue-gray-200 border-t-transparent bg-transparent px-3 py-2.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 empty:!bg-gray-900 focus:border-2 focus:border-gray-900 focus:border-t-transparent focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50">
                        <option value="">-Select Department-</option>
                        {% for department in departments %}
                        <option value="{{ department }}">{{ department.department }}</option>
                        {% endfor %}
                    </select>

                    <label
                        class="before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1.5 flex h-full w-full select-none text-[11px] font-normal leading-tight text-blue-gray-400 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-blue-gray-200 before:transition-all after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-blue-gray-200 after:transition-all peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[3.75] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-opacity-80 peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:border-gray-900 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:border-gray-900 peer-disabled:text-transparent peer-disabled:before:border-opacity-80 peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                        Select a Department
                    </label>
                </div>
                <br>
                <div class="relative h-11 min-w-[200px]">
                    <input type="text" id="address" name="address"
                        class="peer h-full w-full border-b border-blue-gray-200 bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-500 focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50 placeholder:opacity-0 focus:placeholder:opacity-100" />
                    <label for="address"
                        class="after:content[''] pointer-events-none absolute left-0  -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-700 transition-all after:absolute after:-bottom-1.5 after:block after:w-full after:scale-x-0 after:border-b-2 after:border-gray-500 after:transition-transform after:duration-300 peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[4.25] peer-placeholder-shown:text-blue-gray-500 peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-cyan-700 peer-focus:after:scale-x-100 peer-focus:after:border-cyan-700 peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                        Address:
                    </label>
                </div>
                <div class="relative h-11 min-w-[200px]">
                    <input type="text" id="city" name="city"
                        class="peer h-full w-full border-b border-blue-gray-200 bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-500 focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50 placeholder:opacity-0 focus:placeholder:opacity-100" />
                    <label for="city"
                        class="after:content[''] pointer-events-none absolute left-0  -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-700 transition-all after:absolute after:-bottom-1.5 after:block after:w-full after:scale-x-0 after:border-b-2 after:border-gray-500 after:transition-transform after:duration-300 peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[4.25] peer-placeholder-shown:text-blue-gray-500 peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-cyan-700 peer-focus:after:scale-x-100 peer-focus:after:border-cyan-700 peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                        City:
                    </label>
                </div>
                <div class="relative h-11 min-w-[200px]">
                    <input type="text" id="country" name="country"
                        class="peer h-full w-full border-b border-blue-gray-200 bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-500 focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50 placeholder:opacity-0 focus:placeholder:opacity-100" />
                    <label for="country"
                        class="block after:content[''] pointer-events-none absolute
                    left-0 -top-1.5 h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-700 transition-all after:absolute after:-bottom-1.5 after:block after:w-full after:scale-x-0 after:border-b-2 after:border-gray-500 after:transition-transform after:duration-300 peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[4.25] peer-placeholder-shown:text-blue-gray-500 peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-cyan-700 peer-focus:after:scale-x-100 peer-focus:after:border-cyan-700 peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                        Country:
                    </label>

                </div>
                <div class="relative h-11 min-w-[200px]">
                    <input type="text" id="mobile_number" name="mobile_number"
                        class="peer h-full w-full border-b border-blue-gray-200 bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-500 focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50 placeholder:opacity-0 focus:placeholder:opacity-100" />
                    <label for="mobile_number"
                        class="after:content[''] pointer-events-none absolute left-0  -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-700 transition-all after:absolute after:-bottom-1.5 after:block after:w-full after:scale-x-0 after:border-b-2 after:border-gray-500 after:transition-transform after:duration-300 peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[4.25] peer-placeholder-shown:text-blue-gray-500 peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-cyan-700 peer-focus:after:scale-x-100 peer-focus:after:border-cyan-700 peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                        Mobile Number:
                    </label>
                </div>
                <div class="relative h-11 min-w-[200px]">

                    <label for="date_of_joining" class="block">Date of Joining:</label>
                    <input type="date" id="date_of_joining" name="date_of_joining"
                        class="block w-full  rounded-md px-3 py-2 mb-2" /><br />
                </div>
                <br><br>
                <button type="submit" data-ripple-light="true"
                    class="w-full select-none rounded-lg bg-gradient-to-tr from-gray-900 to-gray-800 py-3 px-6 text-center align-middle font-sans text-xs font-semibold uppercase text-white shadow-md shadow-gray-900/10 transition-all hover:shadow-lg hover:shadow-gray-900/20 active:opacity-[0.85] disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">
                    Create User
                </button>
            </form>
        </div>

        <!-- Add Department Section -->
        <div id="depts" class="hidden content">
            <div id="add-department" class="mb-4 bg-white rounded-xl shadow-xl px-6 py-2 sm:w-1/2 start-0">
                <h2 class="text-xl mb-4 border-b-2 w-fit pb-4 border-black uppercase">Add Department</h2>
                <form method="POST" action="/add_department/" class="space-y-4">
                    {% csrf_token %}
                    <div class="relative h-11 min-w-[200px]">
                        <input type="text" id="department" name="department"
                            class="peer h-full w-full border-b border-blue-gray-200 bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-500 focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50 placeholder:opacity-0 focus:placeholder:opacity-100" />
                        <label for="department"
                            class="after:content[''] pointer-events-none absolute left-0  -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-700 transition-all after:absolute after:-bottom-1.5 after:block after:w-full after:scale-x-0 after:border-b-2 after:border-gray-500 after:transition-transform after:duration-300 peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[4.25] peer-placeholder-shown:text-blue-gray-500 peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-cyan-700 peer-focus:after:scale-x-100 peer-focus:after:border-cyan-700 peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                            Department Name:
                        </label>
                    </div>
                    <br>
                    <button type="submit" data-ripple-light="true"
                        class="w-full select-none rounded-lg bg-gradient-to-tr from-gray-900 to-gray-800 py-3 px-6 text-center align-middle font-sans text-xs font-semibold uppercase text-white shadow-md shadow-gray-900/10 transition-all hover:shadow-lg hover:shadow-gray-900/20 active:opacity-[0.85] disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">
                        Add Department
                    </button>
                </form>
            </div>

            <!-- Listed Departments Section -->
            <div id="listed-departments" class=" mb-4 bg-white rounded-xl shadow-xl px-6 py-2 sm:w-1/2 start-0">
                <h2 class="text-xl mb-4 border-b-2 w-fit pb-4 border-black uppercase">Listed Departments</h2>
                <ul>
                    {% for department in departments %}
                    <li>{{ department.department }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>



        <br>
        <!-- Pending Leaves  -->
        <div id="pending" class="content hidden bg-white rounded shadow p-6 overflow-x-auto">
            <h2 class="text-xl mb-4 uppercase">Latest Leave Applications</h2>
            <hr class="bg-black py-[1px] w-[90%] mb-5">

            <table class="w-full">
                <thead>
                    <tr class="text-blue-900">
                        <th class="text-start px-4">User</th>
                        <th class="text-start px-4">Leave Category</th>
                        <th class="text-start px-4">From Date</th>
                        <th class="text-start px-4">To Date</th>
                        <th class="text-start px-4">Date of Application</th>
                        <th class="text-start px-4">Attachment</th>
                        <th class="text-start px-4">Status</th>
                        <th class="text-start px-4">Actions</th> <!-- New column for actions -->
                    </tr>
                </thead>
                <tbody>
                    {% for application in all_leave_applications_pending %}
                    <tr class="{% cycle 'bg-gray-50' 'bg-white' %}">
                        <td class="  px-4 py-2 font-medium text-blue-600">{{ application.user }}</td>
                        <td class="px-4 py-2">
                            {% if application.leave_category.leave_type == 'Half Days' %}
                                {{ application.leave_category.leave_type }} ({{ application.which_half }})
                            {% else %}
                                {{ application.leave_category.leave_type }}
                            {% endif %}
                        </td>
                        <td class="  px-4 py-2">{{ application.from_date }}
                        </td>
                        <td class="  px-4 py-2">{{ application.to_date }}</td>
                        <td class="px-4 py-2">{{ application.applied_on }}</td>
                        {% if application.attachment %}
                        <td class="  px-4 py-2">
                            <a class="underline" style="color: blue;" href="{{ application.attachment.url }}"
                                target="_blank">Attachment</a>
                        </td>
                        {% else %}
                        <td class="  px-4 py-2">-</td>
                        {% endif %}
                        <td class="  px-4 py-2 font-semibold text-red-600">Pending</td>
                        <td class="  px-4 py-5 flex gap-5">
                            <form method="post" action="{% url 'approve_leave' application.id %}">
                                {% csrf_token %}
                                <!-- Other fields -->
                                <div class="w-64 lg:w-72">
                                    <div class="relative w-full min-w-[200px]">
                                        <textarea id="admin_remark" name="admin_remark"
                                            class="peer h-full min-h-[100px] w-full resize-none rounded-[7px] border border-blue-gray-200 border-t-transparent bg-transparent px-3 py-2.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 focus:border-2 focus:border-gray-900 focus:border-t-transparent focus:outline-0 disabled:resize-none disabled:border-0 disabled:bg-blue-gray-50"
                                            placeholder=" "></textarea>
                                        <label
                                            class="before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1.5 flex h-full w-full select-none text-[11px] font-normal leading-tight text-blue-gray-400 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-blue-gray-600 before:transition-all after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-blue-gray-200 after:transition-all peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[3.75] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-opacity-80 peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:border-gray-900 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:border-gray-900 peer-disabled:text-transparent peer-disabled:before:border-opacity-80 peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                                            Admin Remark
                                        </label>
                                    </div>
                                </div>
                                <button type="submit" data-ripple-light="true"
                                    class="select-none rounded-lg bg-green-500 py-3 px-6 text-center align-middle font-sans text-xs font-semibold uppercase text-white shadow-md shadow-green-500/20 transition-all hover:shadow-lg hover:shadow-green-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">Approve
                                    Leave</button>
                            </form>
                            <br>
                            <hr class="bg-black py-[1px]">
                            <br>
                            <form method="post" action="{% url 'disapprove_leave' application.id %}">
                                {% csrf_token %}
                                <!-- Other fields -->
                                <div class="w-64 lg:w-72">
                                    <div class="relative w-full min-w-[200px]">
                                        <textarea id="admin_remark" name="admin_remark"
                                            class="peer h-full min-h-[100px] w-full resize-none rounded-[7px] border border-blue-gray-200 border-t-transparent bg-transparent px-3 py-2.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 focus:border-2 focus:border-gray-900 focus:border-t-transparent focus:outline-0 disabled:resize-none disabled:border-0 disabled:bg-blue-gray-50"
                                            placeholder=" "></textarea>
                                        <label
                                            class="before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1.5 flex h-full w-full select-none text-[11px] font-normal leading-tight text-blue-gray-400 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-blue-gray-600 before:transition-all after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-blue-gray-200 after:transition-all peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[3.75] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-opacity-80 peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-gray-900 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:border-gray-900 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:border-gray-900 peer-disabled:text-transparent peer-disabled:before:border-opacity-80 peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                                            Admin Remark
                                        </label>
                                    </div>
                                </div>
                                <button type="submit" data-ripple-light="true"
                                    class="select-none rounded-lg bg-red-500 py-3 px-6 text-center align-middle font-sans text-xs font-semibold uppercase text-white shadow-md shadow-red-500/20 transition-all hover:shadow-lg hover:shadow-red-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">Disapprove
                                    Leave</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <br>

        <!-- Approved Leave Applications Section -->
        <div id="approved" class=" hidden content bg-white rounded shadow p-6 overflow-x-auto sm:w-full">
            <h2 class="text-xl text-gray-600 font-semibold mb-4">Approved Leave Applications</h2>
            <hr class="bg-black py-[1px] w-[90%] mb-5">

            <table class="w-full table">
                <thead>
                    <tr class="text-blue-900">
                        <th class="text-start px-4">User</th>
                        <th class="text-start px-4">Leave Category</th>
                        <th class="text-start px-4">From Date</th>
                        <th class="text-start px-4">To Date</th>
                        <th class="text-start px-4">Date of Application</th>
                        <th class="text-start px-4">Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for application in all_leave_applications_approved %}
                    <tr class="{% cycle 'bg-gray-50' 'bg-white' %}">
                        <td class="  px-4 py-2 text-blue-600">{{ application.user }}
                        </td>
                        <td class="px-4 py-2">
                            {% if application.leave_category.leave_type == 'Half Days' %}
                                {{ application.leave_category.leave_type }} ({{ application.which_half }})
                            {% else %}
                                {{ application.leave_category.leave_type }}
                            {% endif %}
                        </td>
                        <td class="  px-4 py-2">{{ application.from_date }}</td>
                        <td class="  px-4 py-2">{{ application.to_date }}</td>
                        <td class="px-4 py-2">{{ application.applied_on }}</td>
                        <td class="  px-4 py-2 text-green-500 font-medium">Approved
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <br>
        <!-- Disapproved Leave Applications Section -->
        <div id="disapproved" class="content hidden bg-white rounded shadow p-6 overflow-x-auto sm:w-full">
            <h2 class="text-xl mb-4">Disapproved Leave Applications</h2>
            <hr class="bg-gray-600 py-[1px] w-[90%] mb-5">

            <table class="w-full table">
                <thead>
                    <tr class="text-blue-900">
                        <th class="font-bold text-start px-4">User</th>
                        <th class="font-bold text-start px-4">Leave Category</th>
                        <th class="font-bold text-start px-4">From Date</th>
                        <th class="font-bold text-start px-4">To Date</th>
                        <th class="text-start px-4">Date of Application</th>
                        <th class="font-bold text-start px-4">Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for application in all_leave_applications_disapproved %}
                    <tr class="{% cycle 'bg-gray-50' 'bg-white' %}">
                        <td class="  px-4 py-2 text-blue-600">{{ application.user }}
                        </td>
                        <td class="px-4 py-2">
                            {% if application.leave_category.leave_type == 'Half Days' %}
                                {{ application.leave_category.leave_type }} ({{ application.which_half }})
                            {% else %}
                                {{ application.leave_category.leave_type }}
                            {% endif %}
                        </td>
                        <td class="  px-4 py-2">{{ application.from_date }}</td>
                        <td class="  px-4 py-2">{{ application.to_date }}</td>
                        <td class="px-4 py-2">{{ application.applied_on }}</td>
                        <td class="  px-4 py-2 text-red-600 font-medium">Disapproved
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <br>
        <!-- Employee Leaves Section -->
        <div id="empleaves" data-ripple-light="true" class="content hidden rounded shadow p-6 overflow-x-auto sm:w-2/3">
            <h2 class="text-xl mb-4">Employee Leaves</h2>
            <hr class="bg-black py-[1px] w-[90%] mb-5">
            <input type="text" id="employeeLeaveFilter" class="border-gray-300 border w-full px-3 py-2 rounded mb-4"
                placeholder="Filter by User or Leave Category" />
            <table class="w-full table">
                <thead>
                    <tr class="text-blue-800">
                        <th class="px-4 text-start">User</th>
                        <th class="px-4 text-start">Leave Category</th>
                        <th class="px-4 text-start">Leaves Remaining</th>
                        <th class="px-4 text-start">Edit Leaves</th>
                        <th class="px-4 text-start">Update Leaves</th>
                    </tr>
                </thead>
                <tbody id="employeeLeaveTableBody">
                    {% for leaves in all_employee_leaves %}
                    <form method="POST" action="{% url 'edit_employee_leave' %}">
                        {% csrf_token %}
                        <tr class="{% cycle 'bg-gray-50' 'bg-white' %}">
                            <td class="border text-blue-600 border-gray-300 px-4 py-2">{{ leaves.user }}</td>
                            <td class="px-4 py-2">{{ leaves.leave_category }}</td>
                            <td class="px-4 py-2">{{ leaves.leaves_remaining }}</td>
                            <td class="px-4 py-2">
                                <input type="hidden" name="user_id" value="{{ leaves.user.id }}">
                                <input type="hidden" name="leave_category_id" value="{{ leaves.leave_category.id }}">
                                <input type="number" name="leaves_remaining" value="{{ leaves.leaves_remaining }}"
                                    class="border-gray-300 border w-full px-3 py-2 rounded" />
                            </td>
                            <td>
                                <button type="submit"
                                    class="mt-4 w-full select-none rounded-lg bg-gradient-to-tr from-gray-900 to-gray-800 py-3 px-6 text-center align-middle font-sans text-xs font-semibold uppercase text-white shadow-md shadow-gray-900/10 transition-all hover:shadow-lg hover:shadow-gray-900/20 active:opacity-[0.85] disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">
                                    Update Leaves
                                </button>
                            </td>
                        </tr>
                    </form>
                    {% endfor %}
                </tbody>
            </table>
        </div>        
        <br>
        <!-- Leave Categories Section -->
        <div class="bg-white rounded shadow p-6 hidden content overflow-x-auto sm:w-full" id="leavecat">
            <h2 class="text-xl mb-4">Leave Categories</h2>
            <hr class="bg-black py-[1px] w-[90%] mb-5">
            <table class="w-full table">
                <thead>
                    <tr class="text-blue-900">
                        <th class="text-start px-4">Leave Type</th>
                        <th class="text-start px-4">Description</th>
                    </tr>
                </thead>
                <tbody>
                    {% for category in all_leave_categories %}
                    <tr class="{% cycle 'bg-gray-50' 'bg-white' %}">
                        <td class="  px-4 py-2 text-blue-600">{{ category.leave_type }}
                        </td>
                        <td class="  px-4 py-2">{{ category.description }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <!-- Add Leave Type Section -->
            <div id="add-leave-type" class="mb-4 bg-white rounded-xl shadow-xl px-6 py-2 sm:w-1/2 start-0">
                <h2 class="text-xl mb-4 border-b-2 w-fit pb-4 border-black uppercase">Add Leave Type</h2>
                <form method="POST" action="/add_leave_type/" class="space-y-4">
                    {% csrf_token %}
                    <div class="relative h-11 min-w-[200px]">
                        <input type="text" id="leave_type" name="leave_type"
                            class="peer h-full w-full border-b border-blue-gray-200 bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-500 focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50 placeholder:opacity-0 focus:placeholder:opacity-100" />
                        <label for="leave_type"
                            class="after:content[''] pointer-events-none absolute left-0  -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-700 transition-all after:absolute after:-bottom-1.5 after:block after:w-full after:scale-x-0 after:border-b-2 after:border-gray-500 after:transition-transform after:duration-300 peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[4.25] peer-placeholder-shown:text-blue-gray-500 peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-cyan-700 peer-focus:after:scale-x-100 peer-focus:after:border-cyan-700 peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                            Leave Type Name:
                        </label>
                    </div>
                    <div class="relative h-11 min-w-[200px]">
                        <input type="number" id="default_leaves" name="default_leaves" required
                            class="peer h-full w-full border-b border-blue-gray-200 bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-500 focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50 placeholder:opacity-0 focus:placeholder:opacity-100" />
                        <label for="default_leaves"
                            class="after:content[''] pointer-events-none absolute left-0  -top-1.5 flex h-full w-full select-none !overflow-visible truncate text-[11px] font-normal leading-tight text-gray-700 transition-all after:absolute after:-bottom-1.5 after:block after:w-full after:scale-x-0 after:border-b-2 after:border-gray-500 after:transition-transform after:duration-300 peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[4.25] peer-placeholder-shown:text-blue-gray-500 peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-cyan-700 peer-focus:after:scale-x-100 peer-focus:after:border-cyan-700 peer-disabled:text-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
                            Default Leaves:
                        </label>
                        <small class="text-red-600">Note: The default value of leaves will be allotted to all existing employees.</small>
                    </div>
                    <br>
                    <button type="submit" data-ripple-light="true"
                        class="w-full select-none rounded-lg bg-gradient-to-tr from-gray-900 to-gray-800 py-3 px-6 text-center align-middle font-sans text-xs font-semibold uppercase text-white shadow-md shadow-gray-900/10 transition-all hover:shadow-lg hover:shadow-gray-900/20 active:opacity-[0.85] disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none">
                        Add Leave Type
                    </button>
                </form>
            </div>
        </div>
    </div>

    </div>
    {% else %}
    <p class="text-center text-red-500">
        You are not authorized to view this page.
    </p>
    {% endif %}


    <script>
        // Filter functionality for Existing Users table
        document
            .getElementById("userFilter")
            .addEventListener("input", function () {
                const filterValue = this.value.toLowerCase();
                const rows = document.querySelectorAll("#userTableBody tr");
                rows.forEach((row) => {
                    const name = row.children[0].textContent.toLowerCase();
                    const email = row.children[1].textContent.toLowerCase();
                    if (name.includes(filterValue) || email.includes(filterValue)) {
                        row.style.display = "";
                    } else {
                        row.style.display = "none";
                    }
                });
            });

        // Filter functionality for Leave Applications table
        /*
        document
            .getElementById("leaveFilter")
            .addEventListener("input", function () {
                const filterValue = this.value.toLowerCase();
                const rows = document.querySelectorAll("#leaveTableBody tr");
                rows.forEach((row) => {
                    const user = row.children[0].textContent.toLowerCase();
                    const leaveCategory = row.children[1].textContent.toLowerCase();
                    if (
                        user.includes(filterValue) ||
                        leaveCategory.includes(filterValue)
                    ) {
                        row.style.display = "";
                    } else {
                        row.style.display = "none";
                    }
                });
            });
            */
        // Filter functionality for Employee Leaves table
        document
            .getElementById("employeeLeaveFilter")
            .addEventListener("input", function () {
                const filterValue = this.value.toLowerCase();
                const rows = document.querySelectorAll("#employeeLeaveTableBody tr");
                rows.forEach((row) => {
                    const user = row.children[0].textContent.toLowerCase();
                    const leaveCategory = row.children[1].textContent.toLowerCase();
                    if (
                        user.includes(filterValue) ||
                        leaveCategory.includes(filterValue)
                    ) {
                        row.style.display = "";
                    } else {
                        row.style.display = "none";
                    }
                });
            });



        //for sidebar 
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('hidden');
            sidebar.classList.toggle('sm:flex');
        }


        //tab switching function
        function showContent(id) {
            const contents = document.getElementsByClassName('content');
            for (let content of contents) {
                if (content.id === id) {
                    content.classList.remove('hidden');
                } else {
                    content.classList.add('hidden');
                }
            }
        }
    </script>
</body>

</html>